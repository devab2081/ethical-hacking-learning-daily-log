name: Daily Ethical Hacking Log

on:
  schedule:
    - cron: "30 18 * * *"   # Runs daily at 12:00 AM IST
  workflow_dispatch:

permissions:
  contents: write

jobs:
  create-daily-log:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Create Day folder if not exists
        run: |
          DAY_COUNT=$(ls -d Day-* 2>/dev/null | wc -l)
          NEXT_DAY=$((DAY_COUNT + 1))
          FOLDER="Day-$(printf "%02d" $NEXT_DAY)"

          if [ ! -d "$FOLDER" ]; then
            mkdir "$FOLDER"
            cat <<EOF > "$FOLDER/README.md"
# ğŸ“˜ Day $NEXT_DAY â€“ Ethical Hacking Learning Log

## ğŸ“… Date
$(date +"%d-%m-%Y")

## ğŸ” Topics Learned
- 

## ğŸ›  Tools / Platforms Used
- 

## ğŸ§  My Understanding
- 

## ğŸ”‘ Key Takeaways
- 

## âœ… Status
â³ In Progress
EOF
            git config user.name "github-actions[bot]"
            git config user.email "github-actions[bot]@users.noreply.github.com"
            git add "$FOLDER/README.md"
            git commit -m "Day $NEXT_DAY: create learning log template"
            git push
          else
            echo "Day folder already exists. No action taken."
          fi
