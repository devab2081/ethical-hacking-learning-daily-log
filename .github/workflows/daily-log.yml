name: Daily Ethical Hacking Log

on:
  schedule:
    - cron: "30 18 * * *"   # Runs at 12:00 AM IST
  workflow_dispatch:

permissions:
  contents: write

jobs:
  create-daily-log:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Create daily learning folder
        run: |
          DAY_COUNT=$(ls -d Day-* 2>/dev/null | wc -l)
          NEXT_DAY=$((DAY_COUNT + 1))
          DAY_PADDED=$(printf "%02d" $NEXT_DAY)
          FOLDER="Day-$DAY_PADDED"

          if [ ! -d "$FOLDER" ]; then
            mkdir "$FOLDER"

            # README.md
            echo "# ðŸ“˜ Day $NEXT_DAY â€“ Ethical Hacking Learning Log" > "$FOLDER/README.md"
            echo "" >> "$FOLDER/README.md"
            echo "## ðŸ“… Date" >> "$FOLDER/README.md"
            echo "$(date +"%d-%m-%Y")" >> "$FOLDER/README.md"
            echo "" >> "$FOLDER/README.md"
            echo "## ðŸ” Topics Learned" >> "$FOLDER/README.md"
            echo "-" >> "$FOLDER/README.md"
            echo "" >> "$FOLDER/README.md"
            echo "## ðŸ›  Tools / Platforms Used" >> "$FOLDER/README.md"
            echo "-" >> "$FOLDER/README.md"
            echo "" >> "$FOLDER/README.md"
            echo "## ðŸ§  What I Learned Today" >> "$FOLDER/README.md"
            echo "-" >> "$FOLDER/README.md"
            echo "" >> "$FOLDER/README.md"
            echo "## ðŸ”‘ Key Takeaways" >> "$FOLDER/README.md"
            echo "-" >> "$FOLDER/README.md"
            echo "" >> "$FOLDER/README.md"
            echo "## âœ… Status" >> "$FOLDER/README.md"
            echo "â³ In Progress" >> "$FOLDER/README.md"

            # explain.md
            echo "# Simple Explanation â€“ Day $NEXT_DAY" > "$FOLDER/explain.md"
            echo "" >> "$FOLDER/explain.md"
            echo "This file explains today's topic in simple terms for beginners." >> "$FOLDER/explain.md"
            echo "" >> "$FOLDER/explain.md"
            echo "## What is this topic about?" >> "$FOLDER/explain.md"
            echo "-" >> "$FOLDER/explain.md"
            echo "" >> "$FOLDER/explain.md"
            echo "## Why is it important?" >> "$FOLDER/explain.md"
            echo "-" >> "$FOLDER/explain.md"
            echo "" >> "$FOLDER/explain.md"
            echo "## How it is used in security?" >> "$FOLDER/explain.md"
            echo "-" >> "$FOLDER/explain.md"

            # notes.md
            echo "# Personal Notes â€“ Day $NEXT_DAY" > "$FOLDER/notes.md"
            echo "" >> "$FOLDER/notes.md"
            echo "- Short points" >> "$FOLDER/notes.md"
            echo "- Things to revise" >> "$FOLDER/notes.md"
            echo "- Important reminders" >> "$FOLDER/notes.md"

            # questions.md
            echo "# Questions â€“ Day $NEXT_DAY" > "$FOLDER/questions.md"
            echo "" >> "$FOLDER/questions.md"
            echo "- What did I not fully understand today?" >> "$FOLDER/questions.md"
            echo "- What should I revise again?" >> "$FOLDER/questions.md"
            echo "- Interview or thinking questions" >> "$FOLDER/questions.md"

            # diagram.md
            echo "# Visual Diagram â€“ Day $NEXT_DAY" > "$FOLDER/diagram.md"
            echo "" >> "$FOLDER/diagram.md"
            echo "Use this file to add simple text-based diagrams." >> "$FOLDER/diagram.md"
            echo "" >> "$FOLDER/diagram.md"
            echo "## Diagram" >> "$FOLDER/diagram.md"
            echo "" >> "$FOLDER/diagram.md"
            echo '```' >> "$FOLDER/diagram.md"
            echo "Add your visual diagram here" >> "$FOLDER/diagram.md"
            echo '```' >> "$FOLDER/diagram.md"

            git config user.name "github-actions[bot]"
            git config user.email "github-actions[bot]@users.noreply.github.com"
            git add "$FOLDER"
            git commit -m "Day $NEXT_DAY: create daily learning templates"
            git push
          else
            echo "Day folder already exists"
          fi
